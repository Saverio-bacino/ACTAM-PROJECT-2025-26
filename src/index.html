<body>

    <div class="app-container">
        
        <div class="sequencer-area">
            <header>
                <h1>PolyDAW</h1>
                <div class="subtitle">
                    <strong>Manual:</strong> Click a polygon to select it. Click corner dots to target a specific beat. 
                    <strong>Knobs:</strong> Click and drag up/down to adjust. Press <strong>Space</strong> to Play/Pause.
                </div>
            </header>

            <div class="canvas-wrapper">
                <canvas id="polygonCanvas"></canvas>
            </div>

            <div class="transport-bar">
                <div class="transport-group">
                    <button id="addPolygonBtn" class="btn-primary">+ Add Poly</button>
                    
                    <div class="control-group">
                        <label>BPM</label>
                        <input id="globalBpmInput" type="number" min="0" max="600" value="120">
                    </div>
                    
                    <div class="control-group">
                        <label>Master</label>
                        <input id="globalVolInput" type="range" min="0" max="1" step="0.01" value="0.5" style="width: 80px;">
                    </div>
                </div>
                
                <div class="transport-controls">
                    <button id="resetBtn" class="btn-icon">⏮</button>
                    <button id="playBtn" class="btn-icon">▶</button>
                    <button id="pauseBtn" class="btn-icon">⏸</button>
                </div>

                <button id="download-midi" class="btn-secondary">MIDI ↓</button>
            </div>
        </div>

        <div class="sidebar">
            
            <div id="overviewPanel">
                <div class="panel-header">
                    <span>Polygons</span>
                </div>
                <div id="overviewList" class="scroll-area"></div>
                <div class="empty-state" id="emptyStateMsg">
                    No polygons.<br>Click "+ Add Poly" to start.
                </div>
            </div>

            <div id="detailPanel" class="hidden">
                <div class="panel-header">
                    <button id="backToMenuBtn" class="btn-text">← Back</button>
                    <span class="poly-name-header">Edit</span>
                </div>

                <div id="detailList" class="scroll-area">
                    </div>

                <div class="mini-keyboard" id="miniKeyboard">
                    <button class="key white" data-note="c4">C</button>
                    <button class="key black" data-note="c#">C#</button>
                    <button class="key white" data-note="d">D</button>
                    <button class="key black" data-note="d#">D#</button>
                    <button class="key white" data-note="e">E</button>
                    <button class="key white" data-note="f">F</button>
                    <button class="key black" data-note="f#">F#</button>
                    <button class="key white" data-note="g">G</button>
                    <button class="key black" data-note="g#">G#</button>
                    <button class="key white" data-note="a">A</button>
                    <button class="key black" data-note="a#">A#</button>
                    <button class="key white" data-note="b">B</button>
                    <button class="key white" data-note="c5">C</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="https://unpkg.com/midi-writer-js@2.1.4/browser/midi-writer.js"></script>
</body>
</html>